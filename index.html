<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crownforge Studio - Login / Signup</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
<style>
/* ---------- Body & Background ---------- */
body {
  margin: 0;
  height: 100vh;
  font-family: 'Montserrat', sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  background: #1a0a00;
  overflow: hidden;
  perspective: 1000px;
  position: relative;
}

/* BACKGROUND CANVAS */
canvas.bg{position:fixed;inset:0;width:100%;height:100%;z-index:0;pointer-events:none;}

/* ---------- Container Card ---------- */
.container {
  width: 400px;
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(15px);
  border-radius: 25px;
  padding: 40px;
  text-align: center;
  box-shadow: 0 15px 40px rgba(0,0,0,0.6);
  transition: transform 0.5s, box-shadow 0.5s;
  position: relative;
  z-index: 1;
}
.container:hover {
  transform: rotateY(8deg) rotateX(5deg);
  box-shadow: 0 25px 50px rgba(255,140,0,0.6);
}

/* ---------- Title ---------- */
h2 {
  font-size: 2.2em;
  margin-bottom: 25px;
  color: #ff8c00;
  letter-spacing: 1px;
  text-shadow: 0 0 15px #ff8c00;
  transition: 0.3s;
}
.container:hover h2 { text-shadow: 0 0 30px #ffd700; }

/* ---------- Inputs ---------- */
input {
  width: 100%;
  padding: 14px;
  margin: 12px 0;
  border: none;
  border-radius: 15px;
  outline: none;
  background: rgba(255,255,255,0.1);
  color: #fff;
  font-size: 1em;
  box-shadow: inset 0 0 10px rgba(255,140,0,0.2);
  transition: 0.3s;
}
input:focus {
  background: rgba(255,140,0,0.15);
  box-shadow: 0 0 20px #ff8c00, 0 0 30px #ffd700;
}

/* ---------- Buttons ---------- */
button {
  width: 100%;
  padding: 14px;
  margin: 20px 0 10px;
  border: none;
  border-radius: 15px;
  font-weight: 600;
  font-size: 1em;
  cursor: pointer;
  color: #fff;
  background: linear-gradient(90deg,#ff8c00,#ffd700,#ffb733);
  background-size: 200% 200%;
  animation: btnGradient 4s linear infinite;
  transition: 0.3s;
  box-shadow: 0 0 20px #ff8c00;
}
button:hover {
  transform: scale(1.08);
  box-shadow: 0 0 30px #ffd700, 0 0 50px #ffb733;
}
@keyframes btnGradient {
  0% {background-position:0% 50%;}
  50% {background-position:100% 50%;}
  100% {background-position:0% 50%;}
}

/* ---------- Toggle link ---------- */
.toggle-btn {
  background: none;
  color: #ff8c00;
  margin-top: 10px;
  cursor: pointer;
  font-size: 0.95em;
  transition: 0.3s;
}
.toggle-btn:hover { text-decoration: underline; color:#ffd700; }

/* ---------- Hidden signup fields ---------- */
#email, #confirm-password { display: none; }

/* ---------- Loading overlay ---------- */
.loading-overlay {
  position: fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background: rgba(0,0,0,0.95);
  display:flex;
  flex-direction: column;
  justify-content:center;
  align-items:center;
  color:#ff8c00;
  font-size:1.5em;
  z-index:1000;
  display:none;
}
.progress-bar {
  width: 300px;
  height: 20px;
  border-radius: 12px;
  overflow:hidden;
  background: rgba(255,255,255,0.2);
  margin-top:20px;
}
.progress-bar-inner {
  height:100%;
  width:0%;
  background: linear-gradient(to right,#ff8c00,#ffd700,#ffb733);
  border-radius:12px;
  transition: width 0.2s;
}

/* ---------- Responsive ---------- */
@media(max-width:450px){
  .container { width: 90%; padding: 30px; }
  .progress-bar { width: 90%; }
}
</style>
</head>
<body>

<canvas id="bg" class="bg"></canvas>

<div class="container" id="form-container">
  <h2 id="form-title">Login</h2>
  <input type="text" id="username" placeholder="Username">
  <input type="password" id="password" placeholder="Password">
  <input type="text" id="email" placeholder="Email">
  <input type="password" id="confirm-password" placeholder="Confirm Password" maxlength="8">
  <button id="action-btn">Login</button>
  <div class="toggle-btn" id="toggle-btn">Don't have an account? Signup</div>
</div>

<div class="loading-overlay" id="loading">
  Loading... <span id="loading-percent">0%</span>
  <div class="progress-bar">
    <div class="progress-bar-inner" id="progress-inner"></div>
  </div>
</div>

<script>
// ---------- Particle background ----------
const canvas = document.getElementById('bg');
const ctx = canvas.getContext('2d');
canvas.width = innerWidth;
canvas.height = innerHeight;

const particles = [];
const colors = ['#ff8c00','#ffd700','#ffb733'];

for(let i=0;i<150;i++){
  particles.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    dx:(Math.random()-0.5)*1.2,
    dy:(Math.random()-0.5)*1.2,
    r:Math.random()*3+1,
    color:colors[Math.floor(Math.random()*colors.length)]
  });
}

function animate(){
  ctx.fillStyle = "rgba(26,10,0,0.25)";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  for(let i=0;i<particles.length;i++){
    let p=particles[i];
    p.x+=p.dx;p.y+=p.dy;
    if(p.x<0||p.x>canvas.width)p.dx*=-1;
    if(p.y<0||p.y>canvas.height)p.dy*=-1;

    ctx.fillStyle=p.color;
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fill();

    for(let j=i+1;j<particles.length;j++){
      let p2=particles[j];
      let d=Math.hypot(p.x-p2.x,p.y-p2.y);
      if(d<120){
        ctx.strokeStyle='rgba(255,215,0,0.08)';
        ctx.lineWidth=1;
        ctx.beginPath();
        ctx.moveTo(p.x,p.y);
        ctx.lineTo(p2.x,p2.y);
        ctx.stroke();
      }
    }
  }
  requestAnimationFrame(animate);
}
animate();
window.addEventListener('resize',()=>{canvas.width=innerWidth;canvas.height=innerHeight;});

// ---------- Login/Signup ----------
let isLogin = true;
const formTitle = document.getElementById('form-title');
const actionBtn = document.getElementById('action-btn');
const toggleBtn = document.getElementById('toggle-btn');
const emailInput = document.getElementById('email');
const confirmPasswordInput = document.getElementById('confirm-password');
const loadingOverlay = document.getElementById('loading');
const loadingPercent = document.getElementById('loading-percent');
const progressInner = document.getElementById('progress-inner');

toggleBtn.addEventListener('click', () => {
    isLogin = !isLogin;
    formTitle.textContent = isLogin ? "Login" : "Signup";
    actionBtn.textContent = isLogin ? "Login" : "Signup";
    toggleBtn.textContent = isLogin ? "Don't have an account? Signup" : "Already have an account? Login";
    emailInput.style.display = isLogin ? "none" : "block";
    confirmPasswordInput.style.display = isLogin ? "none" : "block";
});

actionBtn.addEventListener('click', () => {
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value.trim();
    const email = document.getElementById('email').value.trim();
    const confirmPassword = document.getElementById('confirm-password').value.trim();

    if(isLogin){
        const stored = localStorage.getItem(username);
        if(stored && JSON.parse(stored).password === password){
            startLoading();
        } else alert('Invalid username or password!');
    } else {
        if(!username || !email || !password || !confirmPassword){
            alert('Please fill all fields!');
            return;
        }
        if(password !== confirmPassword){
            alert('Passwords do not match!');
            return;
        }
        if(password.length > 8){
            alert('Password max 8 characters!');
            return;
        }
        if(localStorage.getItem(username)){
            alert('Username already exists!');
            return;
        }
        localStorage.setItem(username, JSON.stringify({username,email,password}));
        alert('Signup successful! Login now.');
        isLogin = true;
        formTitle.textContent = "Login";
        actionBtn.textContent = "Login";
        toggleBtn.textContent = "Don't have an account? Signup";
        emailInput.style.display = "none";
        confirmPasswordInput.style.display = "none";
    }
});

// ---------- Loading ----------
function startLoading(){
    loadingOverlay.style.display = 'flex';
    let percent = 0;
    const interval = setInterval(()=>{
        percent++;
        loadingPercent.textContent = percent + '%';
        progressInner.style.width = percent + '%';
        if(percent>=100){
            clearInterval(interval);
            window.location.href = "Crownforgepage.html";
        }
    },20);
}
</script>

</body>
</html>
